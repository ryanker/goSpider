<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>goSpider</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.5.4/theme-chalk/index.css">

    <style>
        body {
            margin: 0;
        }

        .el-header {
            background-color: #B3C0D1;
            color: #333;
            min-height: 60px;
            padding: 0;
        }

        .el-main {
            background-color: #E9EEF3;
            color: #333;
            min-height: 160px;
        }

        .el-footer {
            background-color: #B3C0D1;
            color: #333;
            line-height: 60px;
            text-align: center;
        }
    </style>
</head>
<body>
<div id="app">
    <el-container>
        <el-header>
            <el-menu :default-active="menuActive" mode="horizontal">
                <el-menu-item index="1"><a href="/" target="_blank">首页</a></el-menu-item>
            </el-menu>
        </el-header>
        <el-main style="text-align: center">
            <div>{{ d.Title }} ({{ d.ImgNum }}P)</div>
            <!--<div v-html="d.Content"></div>-->
            <div v-for="v in imgList"><img :src="v.ImgUrlNew ? v.ImgUrlNew : v.ImgUrl"/></div>
        </el-main>
        <el-footer>@2019</el-footer>
    </el-container>
</div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.7/vue.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.5.4/index.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.0/js.cookie.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.10.0/js/md5.min.js"></script>
<script>
	const Pid = '{[{.Pid}]}';
	new Vue({
		el: '#app',
		data() {
			return {
				menuActive: '1',
				d: {},
				imgList: {},
			}
		},
		mounted() {
			// 内容
			axios.get('/img/read?Pid=' + Pid).then(res => {
				const r = res.data;
				if (!r) {
					this.$message.error('服务器错误，请稍后再试');
				} else if (r.code !== '0') {
					this.$message.error(r.message);
				} else {
					this.d = r.data || {}
				}
			}).catch((error) => {
				console.log(error);
				this.$message.error('服务器错误，请稍后再试');
			});

			// 内容图片
			axios.get('/img/dataRead?Pid=' + Pid).then(res => {
				const r = res.data;
				if (!r) {
					this.$message.error('服务器错误，请稍后再试');
				} else if (r.code !== '0') {
					this.$message.error(r.message);
				} else {
					this.imgList = r.list || {}
					console.log(this.imgList)
				}
			}).catch((error) => {
				console.log(error);
				this.$message.error('服务器错误，请稍后再试');
			});
		}
	})
</script>

</body>
</html>
